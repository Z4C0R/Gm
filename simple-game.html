<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Juego de Exploración</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.55.2/phaser.min.js"></script>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: #333;
        }
    </style>
</head>
<body>
<script>
const config = {
    type: Phaser.AUTO,
    width: 800,
    height: 600,
    backgroundColor: '#4B692F', // Color verde oscuro para el fondo
    scene: {
        preload: preload,
        create: create,
        update: update
    },
    physics: {
        default: 'arcade',
        arcade: {
            debug: false
        }
    }
};

const game = new Phaser.Game(config);
let player;
let targetX = 0;
let targetY = 0;
let isMoving = false;

function preload() {
    // Creamos un cuadrado simple como jugador
    this.load.rectangle('player', {
        width: 32,
        height: 32,
        fill: '#ff0000'
    });
}

function create() {
    // Crear el jugador en el centro
    player = this.add.rectangle(400, 300, 32, 32, 0xff0000);
    
    // Habilitar física para el jugador
    this.physics.add.existing(player);

    // Configurar interacción con el click/touch
    this.input.on('pointerdown', (pointer) => {
        targetX = pointer.x;
        targetY = pointer.y;
        isMoving = true;
    });

    // Añadir límites del mundo
    this.physics.world.setBounds(0, 0, 800, 600);
    player.body.setCollideWorldBounds(true);
}

function update() {
    if (isMoving) {
        // Calcular la dirección hacia el objetivo
        const angle = Phaser.Math.Angle.Between(
            player.x, player.y,
            targetX, targetY
        );

        // Calcular la distancia al objetivo
        const distance = Phaser.Math.Distance.Between(
            player.x, player.y,
            targetX, targetY
        );

        if (distance > 5) { // Si no estamos muy cerca del objetivo
            // Velocidad de movimiento
            const speed = 200;
            
            // Mover hacia el objetivo
            player.body.setVelocityX(Math.cos(angle) * speed);
            player.body.setVelocityY(Math.sin(angle) * speed);
        } else {
            // Detener el movimiento cuando llegamos al objetivo
            player.body.setVelocity(0);
            isMoving = false;
        }
    }
}
</script>
</body>
</html>
